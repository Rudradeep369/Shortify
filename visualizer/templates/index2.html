<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorting Visualizer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .array-bar {
            display: inline-block;
            margin: 1px;
            background-color: #4F46E5;
            position: relative;
            bottom: 0;
            vertical-align: bottom;
            text-align: center;
            color: white;
        }
        .array-container {
            display: flex;
            align-items: flex-end;
            height: 300px;
            width: 100%;
        }
        .array-bar span {
            position: absolute;
            top: -20px;
            font-size: 12px;
        }
    </style>
</head>
<body class="bg-dark text-white">
    <header class="bg-primary text-center py-3">
        <h1>Sorting Visualizer</h1>
    </header>

    <div class="container mt-4">
        <div class="d-flex flex-wrap justify-content-center gap-3">
            <button class="btn btn-light" onclick="generateArray()">Generate Array</button>
            <select id="algorithm" class="form-select w-auto">
                <option value="">Choose Algorithm</option>
                <option value="bubble">Bubble Sort</option>
                <option value="selection">Selection Sort</option>
                <option value="insertion">Insertion Sort</option>
                <option value="merge">Merge Sort</option>
                <option value="quick">Quick Sort</option>
                <option value="heap">Heap Sort</option>
            </select>
            <input type="number" id="arraySize" class="form-control w-auto" placeholder="Array Size" value="30">
            <input type="number" id="speed" class="form-control w-auto" placeholder="Speed (ms)" value="200">
            <button class="btn btn-light" onclick="startSort()">Sort</button>
        </div>

        <div class="array-container d-flex justify-content-center mt-4" id="arrayContainer"></div>

        <div class="mt-4 p-3 bg-light text-dark rounded" id="algorithmInfo">
            <h3>Algorithm Details</h3>
            <p id="algorithmDescription">Select a sorting algorithm to view its details here.</p>
        </div>
    </div>

    <script>
        let array = [];
        let speed = 200;

        function generateArray() {
            const size = document.getElementById('arraySize').value || 30;
            array = Array.from({ length: size }, () => Math.floor(Math.random() * 100) + 1);
            renderArray();
        }

        function renderArray(activeIndices = []) {
            const container = document.getElementById('arrayContainer');
            container.innerHTML = '';
            array.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.style.height = `${value * 3}px`;
                bar.style.width = `20px`;
                bar.classList.add('array-bar');
                bar.innerHTML = `<span>${value}</span>`;

                if (activeIndices.includes(index)) {
                    bar.style.backgroundColor = 'red';
                } else {
                    bar.style.backgroundColor = '#4F46E5';
                }

                container.appendChild(bar);
            });
        }

        async function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function bubbleSort() {
            for (let i = 0; i < array.length; i++) {
                for (let j = 0; j < array.length - i - 1; j++) {
                    renderArray([j, j + 1]); // Highlight the bars being compared
                    await sleep(speed);

                    if (array[j] > array[j + 1]) {
                        [array[j], array[j + 1]] = [array[j + 1], array[j]];
                        renderArray([j, j + 1]); // Highlight the bars being swapped
                        await sleep(speed);
                    }
                }
            }
            renderArray(); // Final render without highlights
        }

        async function selectionSort() { /* Selection Sort code */ }
        async function insertionSort() { /* Insertion Sort code */ }
        async function mergeSort(start = 0, end = array.length - 1) { /* Merge Sort code */ }
        async function quickSort(start = 0, end = array.length - 1) { /* Quick Sort code */ }
        async function heapSort() { /* Heap Sort code */ }

        function startSort() {
            speed = document.getElementById('speed').value || 100;
            const algorithm = document.getElementById('algorithm').value;
            displayAlgorithmInfo(algorithm);
            if (algorithm === 'bubble') bubbleSort();
            if (algorithm === 'selection') selectionSort();
            if (algorithm === 'insertion') insertionSort();
            if (algorithm === 'merge') mergeSort();
            if (algorithm === 'quick') quickSort();
            if (algorithm === 'heap') heapSort();
        }

        function displayAlgorithmInfo(algorithm) {
            const info = {
                bubble: {
                    name: "Bubble Sort",
                    description: "Repeatedly swaps adjacent elements if they are in the wrong order.",
                    timeComplexity: "O(n^2)"
                },
                selection: {
                    name: "Selection Sort",
                    description: "Selects the smallest element and places it at the beginning.",
                    timeComplexity: "O(n^2)"
                },
                insertion: {
                    name: "Insertion Sort",
                    description: "Builds a sorted list by inserting elements in their correct position.",
                    timeComplexity: "O(n^2)"
                },
                merge: {
                    name: "Merge Sort",
                    description: "Divides the array and merges sorted parts.",
                    timeComplexity: "O(n log n)"
                },
                quick: {
                    name: "Quick Sort",
                    description: "Partitions the array around a pivot.",
                    timeComplexity: "O(n log n)"
                },
                heap: {
                    name: "Heap Sort",
                    description: "Transforms the array into a heap structure and extracts elements.",
                    timeComplexity: "O(n log n)"
                }
            };

            const selectedInfo = info[algorithm];
            if (selectedInfo) {
                document.getElementById('algorithmDescription').innerHTML = `
                    <strong>${selectedInfo.name}</strong><br>
                    ${selectedInfo.description}<br>
                    <strong>Time Complexity:</strong> ${selectedInfo.timeComplexity}
                `;
            } else {
                document.getElementById('algorithmDescription').innerHTML = "Select a sorting algorithm to view its details here.";
            }
        }

        generateArray();
    </script>
</body>
</html>
